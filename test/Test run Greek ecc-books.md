# Test run with the Greek ecc-books dataset

Canonical URL of the dataset: http://www.semantics.gr/authorities/vocabularies/ecc-books-dataset 

## Downloading the dataset description using the crawler tool:

The crawler fails currently for this URL. The command to only download the dataset description would be:

```bash
docker-compose run --rm --user 1000:1000 crawler /bin/bash ./crawler.sh   \
  -dataset_uri http://www.semantics.gr/authorities/vocabularies/ecc-books-dataset  \
  -dataset_description_only \
  -output_file /opt/data/ecc-books-dataset-description.nt
```

Instead we used the following work around to download the complete dataset (including the dataset description).
The following 'curl' command was run in the home dir of the lod-aggregator:

```bash
curl -H "Accept: application/rdf+xml" \
     https://www.semantics.gr/authorities/vocabularies/ecc-books-dataset \
     > ./data/ecc-books-dataset.rdf
```

## Validating the dataset description

Before processing the complete data we validated the dataset description. We used a SHACL shape file defined for datasets with URI lists using the VOID ontology:  

```bash
docker-compose run --rm --user 1000:1000 validate starter.sh \
  --data ecc-books-dataset.rdf \
  --shape shacl_dataset_list_void.ttl \
  --output gr_validate_dataset.ttl
```

The validation was succesful, see the gr_validate_dataset.ttl report.


## Mapping the schema.org data to EDM data

Next step was doing the actual conversion of the resources.

```bash
docker-compose run --rm --user 1000:1000 map starter.sh \
  --data ecc-books-dataset.rdf \
  --query gr_total.rq \
  --output ecc-books-edm.ttl
```

## Validate the total the EDM data

Validate the generated EDM data in respect to the requirements listed in "Guidelines for providing and handling Schema.org metadata in compliance with Europeana".

```bash
docker-compose run --rm --user 1000:1000 validate starter.sh \
  --data ecc-books-edm.ttl \
  --shape shacl_edm.ttl \
  --output gr_validate.ttl
```

This results in a number of violations that still need to be investigated, see the gr_validate.ttl report for more info.

## Serialize the EDM to RDF/XML format

With a succesful validation the next step would be to convert the result to RDF/XML in so it can be processed by Europeana

```bash
docker-compose run --rm --user 1000:1000 serialize starter.sh \
  --data ecc-books-edm.ttl \
  --format RDF/XML \
  --output ecc-books-edm.rdf
```

The files generated by this test run are stored in the test dir under gr_ecc-books.
