# Test run with the ECC Books dataset

Canonical URL of the dataset: http://www.semantics.gr/authorities/vocabularies/ecc-books-dataset 

## Downloading the dataset description using the crawler tool:

Currently the crawler doesn't support a straight download of the dataset yet. Instead we used the following work around to download the complete dataset (including the dataset description). The following 'curl' command was run in the home dir of the lod-aggregator:

```bash
curl -H "Accept: application/rdf+xml" \
     https://www.semantics.gr/authorities/vocabularies/ecc-books-dataset \
     > ./data/ecc-books.rdf
```

## Validating the dataset description

Before processing the complete data we validated the dataset description. We used a SHACL shape file defined for datasets with URI lists using the VOID ontology:  

```bash
docker-compose run --rm --user 1000:1000 validate starter.sh \
  --data ecc-books.rdf \
  --shape shacl_dataset_list_void.ttl \
  --output ecc-books-val-ds.ttl
```

The validation was succesful, see the gr_validate_dataset.ttl report.

## Mapping the schema.org data to EDM data

Next step was doing the actual conversion of the resources.

```bash
docker-compose run --rm --user 1000:1000 map starter.sh \
  --data ecc-books.rdf \
  --query schema2edm.rq \
  --format RDF/XML \
  --output ecc-books-edm.rdf
```

## Validate the total the EDM data

Next the generated EDM data was validated based on the requirements listed in ["Guidelines for providing and handling Schema.org metadata in compliance with Europeana"](https://docs.google.com/document/d/1ffQt8LyHuldWMbFr79HEZ-_vQUVpcNqaCOAqzN12ycg/edit).

```bash
docker-compose run --rm --user 1000:1000 validate starter.sh \
  --data ecc-books-edm.rdf \
  --shape shacl_edm.ttl \
  --output ecc-books-edm-val.ttl
```

This results in a number of violations that still need to be investigated, see the gr_validate.ttl report for more info.

## Zip the result for transport to Europena

```bash
# note the ./data in this command!
gzip ./data/ecc-books-edm.rdf
```

The result file will be created in the `data` dir and is called `ecc-books-edm.rdf.gz`

All the files generated by this test run are stored in the `test` dir under `ecc-books` for documentation purposes.
